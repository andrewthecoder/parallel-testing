{% block body_container_header %}
    <h1>Parallel Totient Tester</h1>
{% endblock %}

{% block body_container_main %}
	{% if debugMessage %}
		<div id="debug">
			<pre>
				{{ debugMessage }}
			</pre>
		</div>
	{% endif %}
	
	<div id="output"><pre></pre></div>
{% endblock %}

{% block body_container_footer %}
{% endblock %}

{% block body_js %}
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
	<script type="text/javascript">
		$(document).ready(function(){

			function update_output() {
			   $.ajax( {
					type: 'GET',
					url: 'update',
					dataType: 'json',
					success: function(result){
						if (result.queue == 'running') {
							setTimeout(function() { update_output(); }, 1000);
						}
						$('#output pre').text(result.output);
					},
					error: function(xhr, ajaxOptions, thrownError){ alert('Error: ' + thrownError); }
	    	   });
			}

			update_output();
		});
	</script>
{% endblock %}